# Slip-0144

```
Number:  SLIP-0144
Title:   Encoding network identifier in Bip44 paths.
Type:    Standard
Status:  Draft
Authors: Dan Libby <dan@osc.co.cr>
Created: 2018-07-12
```

## Abstract

We extend Slip44 to define a reserved range of addresses in the coin_type
registry for the purpose of uniquely and automatically identifying alternate
networks such as testnets for each coin without need to maintain a registry of
networks.

Tools can immediately begin using these simple formulas to identify alternate
networks for any coin that is already registered in Slip44.

## Motivation

Software code that implements or works with cryptocurrencies typically assigns
unique parameters to each coin+network pair. This is the fundamental
unit that identifies a blockchain, not the coin by itself. Much code already
works with this pair, so it is desirable that Bip44 paths be able to express
them also, and so that generated keys can be uniquely associated with the
blockchain for which they are valid.

An additional motivation is to keep software codepaths as similar as possible regardless of whether
dealing with Mainnet or an alternate network, and not require passing coin identifier
out of band when dealing with such.

Finally, Slip32 defines an alternate encoding for Bip32 keys that embeds the
Bip44 path within the key. The encoding provided in this Slip makes it
possible to distinguish Mainnet keys from other networks even if the keys use
the same prefix bytes.

## Method

The most simple and obvious way to encode this information would be to define a
network field after the coin_type field in the Bip44 path. However, this
would break a lot of existing tools, wallets and infrastructure.

As such, this bip defines a mechanism that overloads the coin_type field in a way
that does not lose information nor require any new registry and that is backwards
compatible with existing tools, at the minor cost that a space is reserved in
the registry for testnet identification and for future use. Any tool that cares
about testnets can use this Slip. Tools that do not care can safely ignore
it.

## Review of prior work

A Bip44 path is defined as:

    m / purpose' / coin_type' / account' / change / address_index

Registered coin types are defined as:

|index|hexa|coin|
|-----|----|----|
|0|0x80000000|Bitcoin|
|1|0x80000001|Bitcoin Testnet|

Note that index 1 is limited to '**Bitcoin** Testnet' and Regtest is not even defined.

Note also that each hex value begins with 0x8, because Bip32 defines hardened
keys as those >= 0x80000000.  This means there are 2^31 (2147483648) available
values we can use for coin_type.

Slip44 defines registered coin types for Bip44. At the time of this writing,
the highest registered value is index 91927009. Most of the space below it is
unassigned, and all of the space above it.

Slip44 does not assign any values for test networks, except that it modifies
the meaning of index 1 from "Bitcoin Testnet" to "Testnet (all coins)".

## Definition

We define the following value ranges within the Bip44 coin_type field, each
with a corresponding network index:

| start index |  end index |  start hex |     end hex | network index | usage                        |
|------------:|-----------:|-----------:|------------:|--------------:|------------------------------|
|           0 |   99999999 | 0x80000000 |  0x85F5E0FF |             0 | Coin identifier (Mainnet)    |
|   100000000 |  199999999 | 0x85F5E100 |  0x8BEBC1FF |             1 | Testnet                      |
|   200000000 |  299999999 | 0x8BEBC200 |  0x91E1A2FF |             2 | Regtest                      |
|   300000000 |  399999999 | 0x91E1A300 |  0x97D783FF |             3 | Altnet 3                     |
|   400000000 |  499999999 | 0x97D78400 |  0x9DCD64FF |             4 | Altnet 4                     |
|   500000000 |  599999999 | 0x9DCD6500 |  0xA3C345FF |             5 | Altnet 5                     |
|   600000000 |  699999999 | 0xA3C34600 |  0xA9B926FF |             6 | Altnet 6                     |
|   700000000 |  799999999 | 0xA9B92700 |  0xAFAF07FF |             7 | Altnet 7                     |
|   800000000 |  899999999 | 0xAFAF0800 |  0xB5A4E8FF |             8 | Altnet 8                     |
|   900000000 |  999999999 | 0xB5A4E900 |  0xBB9AC9FF |             9 | Altnet 9                     |
|  1000000000 | 2147483648 | 0xBB9ACA00 | 0x100000000 |               | Reserved for future purposes |

It should be noted that the network indexes [1-9] are merely reserved
for each coin, and does not imply that each coin actually implements
all or any of those networks.

We do not here define the purpose of Networks 3 and above, designated Altnet X.
Only that they represent possible networks for each coin.

In the future, it could make sense for coin implementers to include the
string Altnet X in their network names or provide an obvious mapping.

## Calculation / Heuristic

The ranges are defined in such a way that given a mainnet coin identifier, one
can automatically calculate the corresponding value for that coin's Testnet,
Regtest, Altnet 3, etc. And vice-versa to determine the mainnet coin ID.

Further, one can easily identify which network type is specified by its
integer value.

### Coin/Mainnet to Altnet formula

    coin_idx + (network_index * 100000000) = altnet_idx

### Altnet to Coin/Mainnet formula

    altnet_idx - (network_index * 100000000) = coin_idx

## Calculation Examples

### Calculating Altnet Index from Mainnet Index

| coin     |    index | network  | calculation                | index (altnet) | hex (altnet) |
|----------|---------:|----------|----------------------------|---------------:|-------------:|
| Bitcoin  |        0 | Mainnet  | 0 + (0 * 100000000)        |              0 |   0x80000000 |
| Bitcoin  |        0 | Testnet  | 0 + (1 * 100000000)        |      100000000 |   0x85F5E100 |
| Bitcoin  |        0 | Regtest  | 0 + (2 * 100000000)        |      200000000 |   0x8BEBC200 |
| Bitcoin  |        0 | Altnet 3 | 0 + (3 * 100000000)        |      300000000 |   0x91E1A300 |
| Bitcoin  |        0 | Altnet 4 | 0 + (4 * 100000000)        |      400000000 |   0x97D78400 |
| Bitcoin  |        0 | Altnet 5 | 0 + (5 * 100000000)        |      500000000 |   0x9DCD6500 |
| Bitcoin  |        0 | Altnet 6 | 0 + (6 * 100000000)        |      600000000 |   0xA3C34600 |
| Bitcoin  |        0 | Altnet 7 | 0 + (7 * 100000000)        |      700000000 |   0xA9B92700 |
| Bitcoin  |        0 | Altnet 8 | 0 + (8 * 100000000)        |      800000000 |   0xAFAF0800 |
| Bitcoin  |        0 | Altnet 9 | 0 + (9 * 100000000)        |      900000000 |   0xB5A4E900 |
| Litecoin |        1 | Mainnet  | 1 + (0 * 100000000)        |              1 |   0x80000001 |
| Litecoin |        1 | Testnet  | 1 + (1 * 100000000)        |      100000001 |   0x85F5E101 |
| Litecoin |        1 | Regtest  | 1 + (2 * 100000000)        |      200000001 |   0x8BEBC201 |
| Litecoin |        1 | Altnet 3 | 1 + (3 * 100000000)        |      300000001 |   0x91E1A301 |
| Litecoin |        1 | Altnet 4 | 1 + (4 * 100000000)        |      400000001 |   0x97D78401 |
| Litecoin |        1 | Altnet 5 | 1 + (5 * 100000000)        |      500000001 |   0x9DCD6501 |
| Litecoin |        1 | Altnet 6 | 1 + (6 * 100000000)        |      600000001 |   0xA3C34601 |
| Litecoin |        1 | Altnet 7 | 1 + (7 * 100000000)        |      700000001 |   0xA9B92701 |
| Litecoin |        1 | Altnet 8 | 1 + (8 * 100000000)        |      800000001 |   0xAFAF0801 |
| Litecoin |        1 | Altnet 9 | 1 + (9 * 100000000)        |      900000001 |   0xB5A4E901 |
| Bigup    |      100 | Mainnet  | 100 + (0 * 100000000)      |            100 |   0x80000064 |
| Bigup    |      100 | Testnet  | 100 + (1 * 100000000)      |      100000100 |   0x85F5E164 |
| Bigup    |      100 | Regtest  | 100 + (2 * 100000000)      |      200000100 |   0x8BEBC264 |
| Bigup    |      100 | Altnet 3 | 100 + (3 * 100000000)      |      300000100 |   0x91E1A364 |
| Bigup    |      100 | Altnet 4 | 100 + (4 * 100000000)      |      400000100 |   0x97D78464 |
| Bigup    |      100 | Altnet 5 | 100 + (5 * 100000000)      |      500000100 |   0x9DCD6564 |
| Bigup    |      100 | Altnet 6 | 100 + (6 * 100000000)      |      600000100 |   0xA3C34664 |
| Bigup    |      100 | Altnet 7 | 100 + (7 * 100000000)      |      700000100 |   0xA9B92764 |
| Bigup    |      100 | Altnet 8 | 100 + (8 * 100000000)      |      800000100 |   0xAFAF0864 |
| Bigup    |      100 | Altnet 9 | 100 + (9 * 100000000)      |      900000100 |   0xB5A4E964 |
| kUSD     | 91927009 | Mainnet  | 91927009 + (0 * 100000000) |       91927009 |   0x857AB1E1 |
| kUSD     | 91927009 | Testnet  | 91927009 + (1 * 100000000) |      191927009 |   0x8B7092E1 |
| kUSD     | 91927009 | Regtest  | 91927009 + (2 * 100000000) |      291927009 |   0x916673E1 |
| kUSD     | 91927009 | Altnet 3 | 91927009 + (3 * 100000000) |      391927009 |   0x975C54E1 |
| kUSD     | 91927009 | Altnet 4 | 91927009 + (4 * 100000000) |      491927009 |   0x9D5235E1 |
| kUSD     | 91927009 | Altnet 5 | 91927009 + (5 * 100000000) |      591927009 |   0xA34816E1 |
| kUSD     | 91927009 | Altnet 6 | 91927009 + (6 * 100000000) |      691927009 |   0xA93DF7E1 |
| kUSD     | 91927009 | Altnet 7 | 91927009 + (7 * 100000000) |      791927009 |   0xAF33D8E1 |
| kUSD     | 91927009 | Altnet 8 | 91927009 + (8 * 100000000) |      891927009 |   0xB529B9E1 |
| kUSD     | 91927009 | Altnet 9 | 91927009 + (9 * 100000000) |      991927009 |   0xBB1F9AE1 |

### Calculating Mainnet Index from Altnet Index

| coin     |     index | network  | calculation                 | index (mainnet) | hex (mainnet) |
|----------|----------:|----------|-----------------------------|----------------:|--------------:|
| Bitcoin  |         0 | Mainnet  | 0 - (0 * 100000000)         |               0 |    0x80000000 |
| Bitcoin  | 100000000 | Testnet  | 100000000 - (1 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 200000000 | Regtest  | 200000000 - (2 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 300000000 | Altnet 3 | 300000000 - (3 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 400000000 | Altnet 4 | 400000000 - (4 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 500000000 | Altnet 5 | 500000000 - (5 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 600000000 | Altnet 6 | 600000000 - (6 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 700000000 | Altnet 7 | 700000000 - (7 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 800000000 | Altnet 8 | 800000000 - (8 * 100000000) |               0 |    0x80000000 |
| Bitcoin  | 900000000 | Altnet 9 | 900000000 - (9 * 100000000) |               0 |    0x80000000 |
| Litecoin |         1 | Mainnet  | 1 - (0 * 100000000)         |               1 |    0x80000001 |
| Litecoin | 100000001 | Testnet  | 100000001 - (1 * 100000000) |               1 |    0x80000001 |
| Litecoin | 200000001 | Regtest  | 200000001 - (2 * 100000000) |               1 |    0x80000001 |
| Litecoin | 300000001 | Altnet 3 | 300000001 - (3 * 100000000) |               1 |    0x80000001 |
| Litecoin | 400000001 | Altnet 4 | 400000001 - (4 * 100000000) |               1 |    0x80000001 |
| Litecoin | 500000001 | Altnet 5 | 500000001 - (5 * 100000000) |               1 |    0x80000001 |
| Litecoin | 600000001 | Altnet 6 | 600000001 - (6 * 100000000) |               1 |    0x80000001 |
| Litecoin | 700000001 | Altnet 7 | 700000001 - (7 * 100000000) |               1 |    0x80000001 |
| Litecoin | 800000001 | Altnet 8 | 800000001 - (8 * 100000000) |               1 |    0x80000001 |
| Litecoin | 900000001 | Altnet 9 | 900000001 - (9 * 100000000) |               1 |    0x80000001 |
| Bigup    |       100 | Mainnet  | 100 - (0 * 100000000)       |             100 |    0x80000064 |
| Bigup    | 100000100 | Testnet  | 100000100 - (1 * 100000000) |             100 |    0x80000064 |
| Bigup    | 200000100 | Regtest  | 200000100 - (2 * 100000000) |             100 |    0x80000064 |
| Bigup    | 300000100 | Altnet 3 | 300000100 - (3 * 100000000) |             100 |    0x80000064 |
| Bigup    | 400000100 | Altnet 4 | 400000100 - (4 * 100000000) |             100 |    0x80000064 |
| Bigup    | 500000100 | Altnet 5 | 500000100 - (5 * 100000000) |             100 |    0x80000064 |
| Bigup    | 600000100 | Altnet 6 | 600000100 - (6 * 100000000) |             100 |    0x80000064 |
| Bigup    | 700000100 | Altnet 7 | 700000100 - (7 * 100000000) |             100 |    0x80000064 |
| Bigup    | 800000100 | Altnet 8 | 800000100 - (8 * 100000000) |             100 |    0x80000064 |
| Bigup    | 900000100 | Altnet 9 | 900000100 - (9 * 100000000) |             100 |    0x80000064 |
| kUSD     |  91927009 | Mainnet  | 91927009 - (0 * 100000000)  |        91927009 |    0x857AB1E1 |
| kUSD     | 191927009 | Testnet  | 191927009 - (1 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 291927009 | Regtest  | 291927009 - (2 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 391927009 | Altnet 3 | 391927009 - (3 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 491927009 | Altnet 4 | 491927009 - (4 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 591927009 | Altnet 5 | 591927009 - (5 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 691927009 | Altnet 6 | 691927009 - (6 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 791927009 | Altnet 7 | 791927009 - (7 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 891927009 | Altnet 8 | 891927009 - (8 * 100000000) |        91927009 |    0x857AB1E1 |
| kUSD     | 991927009 | Altnet 9 | 991927009 - (9 * 100000000) |        91927009 |    0x857AB1E1 |

## Rationale for chosen ranges

Points considered in choosing these ranges:

1. The total space available to use is 2^31  (2147483648).
2. It is desirable to have a large enough space for registered coins (mainnet) that we never run out.
3. The formulas chosen require that there must be enough space for each alternate network as there is for mainnet.
4. We do not know exactly how many alternate test networks that a coin in the future may implement, or for what purpose. It would be short-sighted to limit to only testnet and regtest.
5. If we make the space available for mainnet too large, eg 1000000000 (1 billion) then we do not have enough space available for multiple test networks.
6. It is desirable that alternate networks be easily identifiable by human beings when embedded in a bip44 path.
7. There may be a need to encode additional information in this field in the future so it is a good idea to reserve additional space for future needs.
8. Ensure our ranges do not conflict with any previously registered coins.

## Backwards Compatibility

Existing software can continue to interpret coin_type = 1 to mean Testnet
for either Bitcoin (Bip44) or some undetermined coin (Slip44).

If software that is unaware of this specification should encounter a coin_type
value in the reserved ranges, it will simply interpret it as a coin that it is
unaware of.  It will be able to locate any registered coin for that value because
Slip44 will keep those ranges preserved.

## Preserving Reserved Ranges

Maintainers of Slip44 should refuse to register a coin_type value above
0x85F5E0FF.

## References

* [BIP-0032: Hierarchical Deterministic Wallets](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki)
* [BIP-0044: Multi-Account Hierarchy for Deterministic Wallets](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki)
* [SLIP-0032: Extended serialization format for BIP-32 wallets](https://github.com/satoshilabs/slips/blob/master/slip-0032.md)
* [SLIP-0044: Registered coin types for BIP-0044](https://github.com/satoshilabs/slips/blob/master/slip-0044.md)
